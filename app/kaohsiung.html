---
title: Admin
layout: ./app/layout.ejs
engine: ejs
current: index
---
<div class="container">
    <div class="row">

    </div>
</div>
<script>
    fetch('https://opendata.cwb.gov.tw/api/v1/rest/datastore/F-D0047-067?Authorization=CWB-E07F42AC-0591-4435-BE58-C3A36CC97440')
.then(function (response) {
    return response.json();
})
.then(function (weatherData) {
    console.log(weatherData);

    var Location = weatherData.records.locations[0].location
    console.log(Location);

    Location.forEach(element => {
        var Name = element.locationName
        var WX = element.weatherElement[6].time[0].elementValue[0].value
        var POP = element.weatherElement[0].time[0].elementValue[0].value
        var MinT = element.weatherElement[8].time[0].elementValue[0].value
        var MaxT = element.weatherElement[12].time[0].elementValue[0].value
        var UV = element.weatherElement[9].time[0].elementValue[0].value
        var UVI = element.weatherElement[9].time[0].elementValue[1].value

        var img_src
        if (POP == 0) {
            img_src = "https://image.flaticon.com/icons/svg/578/578153.svg"
        } else if (POP < 25) {
            img_src = "https://image.flaticon.com/icons/svg/578/578116.svg"

        } else if (POP < 50) {
            img_src = "https://image.flaticon.com/icons/svg/578/578118.svg"
        } else {
            img_src = "https://image.flaticon.com/icons/svg/578/578132.svg"
        }

        var Card = document.querySelector(".row")
        Card.innerHTML += `
        <div class="card bg-light col-sm-3 col-md-2">
            <img src="${img_src}" alt="">
            <div>
                <h1 class="font-weight-bold">${Name}</h1>
                <p>天氣現象：</p>
                <p>${WX}</p>
                <p>溫度：${MinT}&#8451 ~ ${MaxT}&#8451</p>
                <p>降雨機率：${POP}%</p>
                <p>紫外線指數：${UV} (${UVI})</p>
            </div>
        </div>
        `
    });
});

</script>